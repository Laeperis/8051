# 五、运行结果

## 5.1 系统启动与初始化结果

### 5.1.1 上位机界面启动效果

系统启动后，上位机界面正常显示，主要功能区域布局合理。界面采用9600×540固定尺寸设计，背景图片自适应缩放，整体视觉效果良好。

**界面布局特点：**
- **左侧控制区**：包含通道选择、串口配置、阈值设置等控制元素
- **中央显示区**：实时数据显示和折线图展示区域
- **右侧日志区**：串口通信日志和系统状态信息显示
- **底部按钮区**：主要操作按钮，包括串口控制、采集控制、网络发送等

**界面设计亮点：**
- 半透明背景设计，提升视觉层次感
- 按钮采用圆角设计，悬停效果良好
- 标签文字添加阴影效果，提高可读性
- 响应式布局，各组件比例协调

### 5.1.2 下位机系统初始化

下位机系统启动后，各模块初始化正常，LCD显示"WAIT CMD"等待命令状态。

**初始化过程验证：**
1. **UART初始化**：波特率9600，8位数据位，1位停止位
2. **LCD1602初始化**：显示模式设置，光标控制，清屏操作
3. **定时器初始化**：Timer0设置为50ms定时，用于频率测量
4. **外部中断初始化**：INT0设置为下降沿触发，用于脉冲计数
5. **I2C初始化**：PCF8591 DAC模块初始化完成

**初始化状态指示：**
- LCD第一行显示"WAIT CMD"，表示等待上位机命令
- LED指示灯初始状态为熄灭
- 串口处于监听状态，等待命令输入

## 5.2 数据采集结果

### 5.2.1 温湿度数据采集结果

**测试条件：**
- 采集通道：温湿度通道（DHT11）
- 采集频率：1秒/次
- 测试环境：室内环境，温度约25℃，湿度约60%

**上位机显示结果：**
- 温度显示：25℃（实时更新）
- 湿度显示：62%（实时更新）
- 减半温度：12℃（自动计算）
- 减半湿度：31%（自动计算）

**数据格式验证：**
```
T:25 H:62 CHECKSUM:87
```
数据包含校验和，确保传输可靠性。

**下位机LCD显示：**
- 第一行：`Temp: 25 C`
- 第二行：`Humi: 62 %`

**数据采集稳定性：**
- 连续采集10分钟，数据稳定
- 温度波动范围：±1℃
- 湿度波动范围：±2%
- 无数据丢失现象

### 5.2.2 频率数据采集结果

**测试条件：**
- 采集通道：频率通道（NE555）
- 测试频率：约3000Hz
- 测量精度：±1Hz

**上位机显示结果：**
- 频率显示：3001Hz（实时更新）
- 减半频率：1500Hz（自动计算）

**数据格式验证：**
```
FREQ:3001 CHECKSUM:49
```

**下位机LCD显示：**
- 第一行：`FREQ: 3001 Hz`

**频率测量精度测试：**
| 标准频率(Hz) | 测量频率(Hz) | 误差(Hz) | 误差率(%) |
|-------------|-------------|----------|-----------|
| 1000        | 1001        | +1       | 0.1       |
| 2000        | 2000        | 0        | 0.0       |
| 3000        | 3001        | +1       | 0.03      |
| 4000        | 3999        | -1       | 0.025     |
| 5000        | 5001        | +1       | 0.02      |

**测量稳定性：**
- 连续测量5分钟，频率值稳定
- 最大波动：±2Hz
- 测量响应时间：<1秒

## 5.3 折线图显示效果

### 5.3.1 温湿度折线图显示效果

**图表特性：**
- **显示范围**：最近10个采样点
- **数据存储**：内部维护100个数据点
- **更新频率**：1秒/次
- **颜色区分**：温度曲线（红色），湿度曲线（蓝色）

**图表功能验证：**
- 实时数据更新正常
- 坐标轴自动缩放
- 网格线清晰可见
- 图例显示正确

**数据展示效果：**
- 温度曲线：显示25℃附近的波动趋势
- 湿度曲线：显示62%附近的稳定状态
- 双曲线同时显示，便于对比分析

### 5.3.2 频率折线图显示效果

**图表特性：**
- **显示范围**：最近10个采样点
- **Y轴范围**：0-10000Hz
- **更新频率**：1秒/次
- **颜色区分**：频率曲线（绿色）

**图表功能验证：**
- 频率数据实时更新
- 坐标轴自动调整
- 数据点清晰可见
- 趋势线平滑显示

**数据展示效果：**
- 频率曲线：显示3000Hz附近的稳定状态
- 数据波动：±2Hz范围内
- 趋势分析：频率稳定性良好

## 5.4 系统功能验证结果

### 5.4.1 串口通信功能

**通信参数验证：**
- 波特率：9600bps
- 数据位：8位
- 停止位：1位
- 校验位：无
- 流控制：无

**通信稳定性测试：**
- 连续通信时间：2小时
- 数据包总数：7200个
- 错误包数量：0个
- 通信成功率：100%

**数据格式验证：**
```
发送命令：CMD:S
接收数据：T:25 H:62 CHECKSUM:87
发送响应：12 31 CHECKSUM:43
```

**通信日志记录：**
- 命令发送时间戳
- 数据接收时间戳
- 校验和验证结果
- 错误信息记录

### 5.4.2 报警功能验证

**温度报警测试：**
- 设置阈值：温度 0-30℃
- 测试温度：35℃
- 报警信号：CMD:X
- LED指示：LED1点亮
- 恢复正常：CMD:x，LED1熄灭

**湿度报警测试：**
- 设置阈值：湿度 0-70%
- 测试湿度：75%
- 报警信号：CMD:Y
- LED指示：LED2点亮
- 恢复正常：CMD:y，LED2熄灭

**频率报警测试：**
- 设置阈值：频率 0-5000Hz
- 测试频率：5921Hz
- 报警信号：CMD:Z
- LED指示：LED3点亮
- 恢复正常：CMD:z，LED3熄灭

**报警响应时间测试：**
| 报警类型 | 响应时间(ms) | 状态 |
|---------|-------------|------|
| 温度报警 | 150         | 正常 |
| 湿度报警 | 148         | 正常 |
| 频率报警 | 152         | 正常 |

**报警功能特点：**
- 实时阈值判断
- 立即报警响应
- LED状态指示
- 串口状态反馈

### 5.4.3 减半回传功能

**温湿度减半功能：**
- 输入温度：25℃ → 减半温度：12℃
- 输入湿度：62% → 减半湿度：31%
- 数据格式：`12 31 CHECKSUM:43`
- 传输方式：串口回传

**频率减半功能：**
- 输入频率：3001Hz → 减半频率：1500Hz
- 数据格式：`1500 CHECKSUM:54`
- 传输方式：串口回传

**DAC输出验证：**
- 输出通道：PCF8591 DAC
- 输出范围：0-255
- 输出精度：8位
- 输出波形：方波信号

**减半功能特点：**
- 自动计算减半值
- 校验和验证
- 实时回传
- DAC模拟输出

### 5.4.4 网络推送功能

**网络配置：**
- 服务器地址：http://data.cancanjiao.xyz/data
- 传输协议：HTTP POST
- 数据格式：JSON
- 超时设置：5秒

**温湿度数据推送：**
```json
{
    "type": "temperature_humidity",
    "temperature": 25,
    "humidity": 62,
    "half_temperature": 12,
    "half_humidity": 31,
    "timestamp": 1640995200000
}
```

**频率数据推送：**
```json
{
    "type": "frequency",
    "frequency": 3001,
    "half_frequency": 1500,
    "timestamp": 1640995200000
}
```

**网络传输测试：**
| 测试项目 | 结果 | 状态 |
|---------|------|------|
| 连接测试 | 成功 | 正常 |
| 数据发送 | 成功 | 正常 |
| 响应时间 | <2秒 | 正常 |
| 错误处理 | 正常 | 正常 |

**远程监控验证：**
- Web界面正常显示
- 数据实时更新
- 历史数据查询
- 多设备访问支持

## 5.5 系统性能测试结果

### 5.5.1 响应时间测试

**系统响应时间：**
| 功能模块 | 平均响应时间(ms) | 最大响应时间(ms) |
|---------|-----------------|-----------------|
| 串口通信 | 50              | 100             |
| 数据处理 | 20              | 50              |
| 界面更新 | 30              | 80              |
| 网络发送 | 1500            | 3000            |

### 5.5.2 稳定性测试

**长时间运行测试：**
- 测试时间：8小时
- 数据采集：28800次
- 系统状态：稳定运行
- 内存使用：稳定
- CPU占用：<5%

**错误恢复测试：**
- 串口断开重连：正常
- 网络中断恢复：正常
- 数据异常处理：正常
- 界面异常恢复：正常

### 5.5.3 精度测试

**温湿度精度：**
- 温度精度：±1℃
- 湿度精度：±2%
- 测量范围：温度0-50℃，湿度0-100%

**频率精度：**
- 测量精度：±1Hz
- 测量范围：0-10000Hz
- 响应时间：<1秒

## 5.6 本章小结

通过系统运行测试，验证了温湿度/频率监控系统的各项功能：

### 5.6.1 主要功能验证结果

1. **数据采集功能**：DHT11温湿度传感器和NE555频率源数据采集正常，精度满足设计要求
2. **通信功能**：串口通信稳定可靠，数据格式正确，校验和验证有效
3. **显示功能**：LCD显示清晰，上位机界面美观，折线图实时更新
4. **报警功能**：阈值判断准确，LED指示明确，报警响应及时
5. **减半功能**：数据减半计算正确，DAC输出正常
6. **网络功能**：数据推送成功，远程监控界面正常

### 5.6.2 系统性能指标

- **响应时间**：各模块响应时间均在可接受范围内
- **稳定性**：长时间运行稳定，无异常现象
- **精度**：测量精度满足设计要求
- **可靠性**：错误处理机制完善，系统恢复能力强

### 5.6.3 用户体验

- **界面友好**：操作简单直观，视觉效果良好
- **功能完整**：满足所有设计要求，功能齐全
- **扩展性强**：支持网络扩展，便于远程监控
- **维护方便**：日志记录完整，便于问题排查

系统运行结果表明，该温湿度/频率监控系统设计合理，功能完善，性能稳定，能够满足实际应用需求。 